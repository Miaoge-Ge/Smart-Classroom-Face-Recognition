# Git 隐私文件清洗笔记

## ❓ 问题
文件（如论文、密码）已被提交并推送到远程仓库，需要从 Git 历史记录中彻底删除，但保留本地物理文件。

## 🛠️ 指令流程

### 1. 从暂存区移除
```bash
git rm --cached <file_name>
```
*   **作用**：将文件从 Git 版本控制中移除，但**保留**硬盘上的文件。
*   `--cached`：仅操作索引（Index），不操作工作区。

### 2. 修正上一次提交
```bash
git commit --amend --no-edit
```
*   **作用**：直接修改最近一次的 commit 记录，而不是产生新的 commit。
*   **效果**：将“移除文件”这个操作合并到上一次提交中，仿佛文件从未被提交过。
*   `--amend`：修正/追加。
*   `--no-edit`：复用之前的提交信息，不弹出编辑器。

### 3. 强制推送
```bash
git push -f origin main
```
*   **作用**：将本地修改后的历史记录强制覆盖到远程仓库。
*   `-f` (force)：忽略冲突，强制覆盖。
